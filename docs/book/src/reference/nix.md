# Nix API

<!-- This file has been generated by nix/generate_documentation. Update the
     documentation inside *.nix files and run the script again. -->


## `lib.defaultConfig` {#lib.defaultConfig}

```
defaultConfig : TopiaryConfig
```

The default configuration of Topiary -- that is the content of
`topiary-config/languages.ncl` -- but as a Nix value.

## `lib.defaultConfigFile` {#lib.defaultConfigFile}

```
defaultConfigFile : File
```

Same as `defaultConfig` but as a Nickel File.

## `lib.defaultConfigPrefetched` {#lib.defaultConfigPrefetched}

```
defaultConfigPrefetched
```

Same as `defaultConfig`, but where all the language grammars point to the
Nix store path of a prefetched and precompiled version of the grammar. This
is `prefetchLanguages defaultConfig`.

## `lib.defaultConfigPrefetchedFile` {#lib.defaultConfigPrefetchedFile}

```
defaultConfigPrefetchedFile : File
```

Same as `defaultConfigPrefetched` but as a Nickel file.

## `lib.wrapWithConfig` {#lib.wrapWithConfig}

```
wrapWithConfig : Derivation -> TopiaryConfig -> Derivation
```

Given a derivation providing `/bin/topiary` and a Topiary configuration
`<config>`, produce an executable running `topiary -C <config>`.

Note that this is different from building Topiary with a different default
configuration: the resulting binary will not accept an additional `-C`
argument.

## `lib.wrapWithConfigFile` {#lib.wrapWithConfigFile}

```
wrapWithConfigFile : Derivation -> File -> Derivation
```

Same as `wrapWithConfig` but with the configuration as a Nickel file.





## `lib.gitHook` {#lib.gitHook}

```
gitHook : AttrSet -> AttrSet
```

### Arguments

bin
: A derivation providing `topiary-cli`

config
: The Topiary configuration to use; defaults to a prefetched version of
  `topiary-config/languages.ncl`.

includeLanguages
: A list of languages to include from the configuration. The hook will not
  process the others. Defaults to all the languages of the configuration.

excludeLanguages
: A list of languages to exclude from the hook. One cannot use both
  `includeLanguages` and `excludeLanguages`.

## `lib.gitHookBin` {#lib.gitHookBin}

```
gitHookBin : AttrSet -> Derivation
```

This function exposes the derivation providing `/bin/topiary` in `gitHook`.
It is meant for clients wanting to get a Git hook but also acquire the same
Topiary, for instance to expose it in their environment. See `gitHook` for a
description of the arguments.



## `lib.toNickelFile` {#lib.toNickelFile}

```
toNickelFile : Any -> File
```

## `lib.fromNickelFile` {#lib.fromNickelFile}

```
fromNickelFile : File -> Any
```



## `lib.prefetchLanguages` {#lib.prefetchLanguages}

```
prefetchLanguages : TopiaryConfig -> TopiaryConfig
```

Given a Topiary configuration as a Nix value, returns the same
configuration, except all language sources have been replaced by a
prefetched and precompiled one. This requires the presence of a `nixHash`
for all sources.

## `lib.prefetchLanguagesFile` {#lib.prefetchLanguagesFile}

```
prefetchLanguagesFile : File -> File
```

Same as `prefetchLanguages`, but expects a path to a Nickel file, and
produces a path to another Nickel file.


